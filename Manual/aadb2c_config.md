# ID基盤の構成  
Azure Active Directory B2C(以下、Azure AD B2C）のカスタムポリシーを利用してSELMIDの振る舞いの設定を行います。  

## カスタムポリシーの構造  
以下のカスタムポリシーが提供されます。

| ポリシー名 | 契約企業様による編集可否 | 定義内容 |
|:---|:---|:---|
| BASE | 不可 | 基本動作に必要な定義 |
| SELMID_EXTENSION | 不可 | CTC拡張機能の定義 |
| USER_EXTENSION_BASE | 可 | 契約企業様毎の設定（スキーマ、UI定義、各種IdPの接続情報） |
| USER_EXTENSION_USERJOURNEYS | 可 | 契約企業様毎のユーザジャーニーの設定 |
| USER_EXTENSION_RP_XX | 可 | 契約企業様毎のアプリケーションとの連携設定（呼び出すポリシー単位で作成） |
- 編集不可となっているポリシーの修正～アップロードを行った場合、動作の保証がされません。  
- 基本的に上位のポリシーを下位のポリシーがオーバーライドします。  

## USER_EXTENSION_BASE  
### 設定内容  
- スキーマ（カスタム属性）  
  - 標準外の属性を定義します
- UI定義  
  - 各種画面テンプレートを定義します
- 各種IdPとの接続情報  
  - 外部IdP（SNS等）との接続情報（client_id, client_secret, 取得する属性等）を定義します
  - 基盤本体のIDデータベースとのインターフェイス（書き込み・読み込みする属性）を定義します

## USER_EXTENSION_USERJOURNEYS  
### 設定内容  
- ユーザジャーニー
  - アクション単位の動作フローを定義します  

## USER_EXTENSION_RP_XX  
### 設定内容  
- アプリケーションとのインターフェイス定義  
  - id_tokenに含める属性を定義します  
